<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10. Dateisysteme - Lernportal Betriebssysteme</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Zilla+Slab:wght@700&display=swap" rel="stylesheet">
    <style>
        .page-nav { background-color: #f8f9fa; padding: 10px 0; border-bottom: 1px solid var(--border-color); font-family: var(--header-font); }
        .page-nav a { color: var(--primary-color); text-decoration: none; font-weight: bold; }
        .page-nav a:hover { text-decoration: underline; }
        .content-section h3 { font-family: var(--title-font); font-size: 1.8rem; color: #444; margin-top: 40px; margin-bottom: 20px; }
        .content-section h4 { font-family: var(--title-font); font-size: 1.4rem; color: var(--primary-color); margin-top: 30px; }
        blockquote { border-left: 4px solid var(--primary-color); padding-left: 20px; margin: 20px 0; font-style: italic; background-color: var(--secondary-color); padding: 15px 20px; border-radius: 0 5px 5px 0; }
        .image-placeholder { background-color: #f0f0f0; border: 1px dashed #ccc; padding: 20px; text-align: center; margin: 20px auto; border-radius: 5px; color: #888; max-width: 80%; display: block; font-family: var(--header-font); }
        code, pre { font-family: Consolas, 'Courier New', monospace; background-color: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; }
        code { padding: 2px 5px; }
        pre { padding: 15px; overflow-x: auto; white-space: pre-wrap; font-size: 0.9em; }
        .key-term { font-weight: bold; color: var(--primary-color); }
        table { width: 100%; margin-top: 20px; border-collapse: collapse; }
        th, td { border: 1px solid var(--border-color); padding: 12px; text-align: left; }
        th { background-color: var(--secondary-color); font-family: var(--header-font); }
    </style>
</head>
<body>

    <nav class="site-nav">
        <div class="container">
        <button class="nav-toggle" aria-label="Men√º umschalten">&#9776;</button>
        <button id="dark-mode-toggle" class="dark-mode-toggle" aria-label="Dark Mode umschalten">üåô</button>
            <a href="index.html">Zur√ºck zur √úbersicht</a>
            <a href="01_einfuehrung.html">1</a>
            <a href="02_grundlagen.html">2</a>
            <a href="03_prozesse.html">3</a>
            <a href="04_threads.html">4</a>
            <a href="05_scheduling.html">5</a>
            <a href="06_synchronisation.html">6</a>
            <a href="07_kommunikation.html">7</a>
            <a href="08_deadlocks.html">8</a>
            <a href="09_speicherverwaltung.html">9</a>
            <a href="10_dateisysteme.html" class="active">10</a>
        </div>
    </nav>

    <header>
        <div class="container">
            <h1>Kapitel 10: Dateisysteme</h1>
            <p>Die Abstraktionsebene f√ºr persistenten Speicher.</p>
        </div>
    </header>

    <main class="container">
        <article class="content-section">
            <h2>Die Rolle und Konzepte des Dateisystems</h2>
            <p>W√§hrend der Hauptspeicher eines Prozesses <span class="key-term">transient</span> (fl√ºchtig) und in seiner Gr√∂√üe begrenzt ist, bieten Festspeicher wie Festplatten oder SSDs eine <span class="key-term">persistente</span> Speicherm√∂glichkeit. Diese Hardware arbeitet jedoch auf einer sehr niedrigen Ebene und versteht nur Befehle wie "Lese Block 4711" oder "Schreibe Block 815".</p>
            <p>Das <span class="key-term">Dateisystem</span> ist die Abstraktionsebene des Betriebssystems, die diese low-level Block-Struktur in ein f√ºr den Menschen verst√§ndliches Konzept von <strong>Dateien</strong> und <strong>Verzeichnissen</strong> √ºbersetzt.</p>
            
            <h3>Dateikonzepte</h3>
            <ul>
                <li><strong>Dateibenennung:</strong> Jedes BS hat eigene Regeln f√ºr Dateinamen (L√§nge, erlaubte Zeichen, Gro√ü-/Kleinschreibung). Dateiendungen (z.B. <code>.pdf</code>) k√∂nnen eine feste Bedeutung haben (Windows) oder nur eine Konvention sein (UNIX).</li>
                <li><strong>Dateitypen:</strong>
                    <ul>
                        <li><strong>Regul√§re Dateien:</strong> Enthalten Benutzerdaten, entweder als Text (lesbare Zeichen nach einer Codierung wie ASCII/UTF-8) oder bin√§r (beliebige Byte-Werte, z.B. f√ºr Bilder oder Programme).</li>
                        <li><strong>Verzeichnisse (Directories):</strong> Systemdateien, die Informationen √ºber andere Dateien und Verzeichnisse enthalten.</li>
                        <li><strong>Spezialdateien (UNIX):</strong> Repr√§sentieren Hardware-Ger√§te, z.B. <code>/dev/tty1</code> f√ºr ein Terminal (Zeichenger√§t) oder <code>/dev/hd1</code> f√ºr eine Festplattenpartition (Blockger√§t).</li>
                    </ul>
                </li>
                <li><strong>Dateizugriff:</strong>
                    <ul>
                        <li><strong>Sequentieller Zugriff:</strong> Die Datei wird von Anfang bis Ende Byte f√ºr Byte gelesen.</li>
                        <li><strong>Wahlfreier Zugriff (Random Access):</strong> Man kann an eine beliebige Stelle in der Datei springen und von dort lesen oder schreiben. Essentiell f√ºr Datenbanken.</li>
                    </ul>
                </li>
                <li><strong>Dateiattribute (Metadaten):</strong> Informationen √ºber die Datei, die mit ihr gespeichert werden, z.B. Zugriffsrechte, Gr√∂√üe, Erstellungsdatum, letzter Zugriff, Eigent√ºmer.</li>
            </ul>

            <h3>Verzeichnisstrukturen</h3>
            <p>Moderne Dateisysteme sind <span class="key-term">hierarchisch</span> organisiert. Ausgehend von einem Wurzelverzeichnis (Root Directory, z.B. <code>/</code> in UNIX oder <code>C:\</code> in Windows) verzweigt sich eine Baumstruktur.</p>
            <div class="image-placeholder">[Diagramm: Hierarchischer Verzeichnisbaum mit Root-Verzeichnis, Unterverzeichnissen und Dateien.]</div>
            <ul>
                <li><strong>Pfadname:</strong> Ein Pfad beschreibt den Weg von einem Startpunkt zu einer Datei.
                    <ul>
                        <li><strong>Absoluter Pfad:</strong> Beginnt immer im Wurzelverzeichnis.</li>
                        <li><strong>Relativer Pfad:</strong> Beginnt im aktuellen Arbeitsverzeichnis.</li>
                    </ul>
                </li>
                <li><strong>Spezielle Eintr√§ge:</strong> In UNIX-artigen Systemen haben Verzeichnisse die Eintr√§ge <code>.</code> (verweist auf das aktuelle Verzeichnis selbst) und <code>..</code> (verweist auf das √ºbergeordnete Verzeichnis).</li>
                <li><strong>Links:</strong>
                    <ul>
                        <li><strong>Harter Link (Hard Link):</strong> Ein zweiter Verzeichniseintrag, der auf denselben physischen Datei-Index (I-Node in UNIX) verweist. Die Datei existiert so lange, wie mindestens ein Hard Link auf sie zeigt.</li>
                        <li><strong>Symbolischer Link (Soft Link / Symlink):</strong> Eine spezielle Datei, die nur den Pfadnamen zu einer anderen Datei enth√§lt. Wird der Link ge√∂ffnet, folgt das BS dem Pfad. Wird die Zieldatei gel√∂scht, ist der Link "tot".</li>
                    </ul>
                </li>
            </ul>

            <h2>Technische Implementierung</h2>
            <h4>Festplattenlayout und Boot-Vorgang</h4>
            <p>Eine Festplatte wird in eine oder mehrere <span class="key-term">Partitionen</span> aufgeteilt. Jede Partition kann ein eigenes Dateisystem enthalten.</p>
            <div class="image-placeholder">[Diagramm: Aufbau einer Festplatte mit MBR und Partitionen. Eine Partition ist vergr√∂√üert und zeigt ihre interne Struktur: Boot Block, Super Block, Free Space Mgmt, I-Nodes, etc.]</div>
            <ol>
                <li><strong>Master Boot Record (MBR):</strong> Der allererste Sektor der Festplatte. Er enth√§lt ein kleines Startprogramm und die <strong>Partitionstabelle</strong>, welche die Anfangs- und Endadressen der Partitionen speichert.</li>
                <li><strong>Struktur einer Partition:</strong>
                    <ul>
                        <li><strong>Boot Block:</strong> Enth√§lt das Programm, um das Betriebssystem von dieser Partition zu laden.</li>
                        <li><strong>Super Block:</strong> Enth√§lt die wichtigsten Metadaten des Dateisystems (Typ, Gr√∂√üe, Anzahl der Bl√∂cke etc.).</li>
                        <li><strong>Freispeicherverwaltung:</strong> Eine Datenstruktur (z.B. eine Bitmap), die verfolgt, welche Bl√∂cke auf der Partition frei oder belegt sind.</li>
                        <li><strong>I-Nodes / FAT:</strong> Der Bereich, der die Metadaten der einzelnen Dateien und die Zeiger auf ihre Datenbl√∂cke enth√§lt.</li>
                        <li><strong>Wurzelverzeichnis:</strong> Der Startpunkt des Verzeichnisbaums.</li>
                        <li><strong>Datenbereich:</strong> Der gr√∂√üte Teil der Partition, der die eigentlichen Inhalte der Dateien und Verzeichnisse speichert.</li>
                    </ul>
                </li>
            </ol>
            <p><strong>Boot-Vorgang:</strong> Das BIOS des Computers liest den MBR (1). Der MBR-Code findet die als "aktiv" markierte Partition (2) und l√§dt deren Boot Block (3), welcher dann das eigentliche Betriebssystem startet.</p>

            <h3>Methoden der Dateizuordnung</h3>
            <p>Dies beschreibt, wie die Datenbl√∂cke einer Datei auf der Festplatte angeordnet werden.</p>
            
            <h4>1. Zusammenh√§ngende Zuordnung (Contiguous Allocation)</h4>
            <p>Alle Bl√∂cke einer Datei werden in einem zusammenh√§ngenden Bereich auf der Festplatte gespeichert. Die Verwaltung ist sehr einfach (nur Startblock + L√§nge).</p>
            <ul>
                <li><strong>Vorteile:</strong> Extrem schneller sequentieller Zugriff, da der Lesekopf nicht springen muss.</li>
                <li><strong>Nachteile:</strong> F√ºhrt zu <strong>externer Fragmentierung</strong> (viele kleine, ungenutzte L√ºcken zwischen Dateien). Die Dateigr√∂√üe muss im Voraus bekannt sein und kann nicht leicht ge√§ndert werden. Wird heute haupts√§chlich f√ºr Read-Only-Medien wie CDs/DVDs verwendet.</li>
            </ul>

            <h4>2. Verkettete Zuordnung (Linked Allocation)</h4>
            <p>Die Bl√∂cke einer Datei k√∂nnen beliebig auf der Platte verstreut sein. Jeder Block enth√§lt einen Zeiger auf den n√§chsten Block der Datei.</p>
            <ul>
                <li><strong>Vorteile:</strong> Keine externe Fragmentierung, flexible Dateigr√∂√üen.</li>
                <li><strong>Nachteile:</strong> Sehr langsamer wahlfreier Zugriff (man muss der Kette folgen). Ein Teil jedes Blocks wird f√ºr den Zeiger "verschwendet". Unzuverl√§ssig: Ein zerst√∂rter Zeiger macht den Rest der Datei unerreichbar.</li>
            </ul>
            
            <h4>3. Verkettete Zuordnung mit Tabelle (FAT - File Allocation Table)</h4>
            <p>Dies ist eine optimierte Variante der verketteten Zuordnung. Die Zeigerkette wird aus den Bl√∂cken entfernt und in einer zentralen Tabelle, der <strong>FAT</strong>, am Anfang der Partition gespeichert. Die FAT wird beim Systemstart in den Hauptspeicher geladen.</p>
            <ul>
                <li><strong>Vorteile:</strong> Der wahlfreie Zugriff ist deutlich schneller, da die Kette im schnellen RAM durchlaufen werden kann. Es wird kein Platz in den Datenbl√∂cken verschwendet.</li>
                <li><strong>Nachteile:</strong> Die gesamte FAT muss im Speicher gehalten werden, was bei sehr gro√üen Festplatten ineffizient werden kann.</li>
            </ul>

            <h4>4. Indizierte Zuordnung (I-Nodes)</h4>
            <div class="image-placeholder">[Diagramm: Struktur eines I-Nodes mit direkten, einfach, doppelt und dreifach indirekten Blockzeigern.]</div>
            <p>Die heute g√§ngigste Methode (verwendet in allen UNIX-Systemen wie Linux, macOS). F√ºr jede Datei existiert ein <span class="key-term">Indexknoten (I-Node)</span>. Der I-Node enth√§lt alle Metadaten der Datei (Gr√∂√üe, Rechte etc.) sowie die Zeiger auf die Datenbl√∂cke.</p>
            <ul>
                <li>F√ºr kleine Dateien enth√§lt der I-Node eine Liste von <strong>direkten Blockzeigern</strong>.</li>
                <li>F√ºr gr√∂√üere Dateien enth√§lt der I-Node zus√§tzlich <strong>indirekte Blockzeiger</strong>:
                    <ul>
                        <li><strong>Einfach indirekt:</strong> Ein Zeiger auf einen Block, der wiederum voller direkter Blockzeiger ist.</li>
                        <li><strong>Doppelt indirekt:</strong> Ein Zeiger auf einen Block, der voller einfach indirekter Blockzeiger ist.</li>
                        <li><strong>Dreifach indirekt:</strong> Entsprechend f√ºr riesige Dateien.</li>
                    </ul>
                </li>
            </ul>
            <p><strong>Vorteile:</strong> Effizienter Zugriff auf kleine und gro√üe Dateien, unterst√ºtzt wahlfreien Zugriff sehr gut. Nur die I-Nodes der ge√∂ffneten Dateien m√ºssen im Speicher sein.</p>

            <h3>Moderne Dateisystem-Technologien</h3>
            <ul>
                <li><strong>Journaling-Dateisysteme (z.B. NTFS, ext3, ext4):</strong> Um die Konsistenz nach einem Systemabsturz schnell wiederherzustellen, werden √Ñnderungen zun√§chst in eine Protokolldatei (das Journal) geschrieben. Nach dem Neustart muss nur das Journal gepr√ºft werden, statt die gesamte Festplatte. Dies macht den Systemstart wesentlich schneller und sicherer.</li>
                <li><strong>Virtual File System (VFS):</strong> Eine Abstraktionsschicht im Kernel, die es erm√∂glicht, verschiedene Dateisystemtypen (lokale, entfernte √ºber Netzwerk) nahtlos in einen einzigen Verzeichnisbaum zu integrieren. Anwendungen k√∂nnen auf alle Dateien mit denselben Systemaufrufen (<code>open</code>, <code>read</code>, <code>write</code>) zugreifen, unabh√§ngig vom zugrundeliegenden Dateisystem.</li>
            </ul>

        </article>
    </main>

    <footer>
        <div class="container">
            <p>Erstellt zur Unterst√ºtzung der Pr√ºfungsvorbereitung. Viel Erfolg bei der Klausur!</p>
        </div>
    </footer>

    <script src="js/main.js"></script>
</body>
</html>